# Instrucciones para Copilot - Proyecto Hefest

## ğŸ¯ INSTRUCCIÃ“N PRINCIPAL
**ANTES de crear, mover o modificar cualquier archivo, SIEMPRE leer:**
1. **README raÃ­z** del Ã¡rea (`docs/README.md`, `src/README.md`)
2. **README especÃ­fico** de la carpeta de destino

## ğŸ¨ **CONTEXTO CRÃTICO DEL PROYECTO HEFEST**
**Hefest es un Sistema Integral de HostelerÃ­a REAL - NO es un proyecto de demostraciÃ³n**

### ğŸ¯ **PRINCIPIO FUNDAMENTAL**: ENTORNO ECONÃ“MICO ADMINISTRATIVO REAL
- âœ… **SIEMPRE implementar datos reales** de hostelerÃ­a y hospederÃ­a
- âŒ **NUNCA usar datos de ejemplo, simulados o ficticios**
- âœ… **Conectar con servicios reales** (inventario, huÃ©spedes, facturaciÃ³n)
- âœ… **MÃ©tricas econÃ³micas reales** (ingresos, gastos, ocupaciÃ³n, ROI)
- âœ… **Flujos de trabajo productivos** para negocio real

### ğŸ¢ **Dominio de AplicaciÃ³n**: HostelerÃ­a y HospederÃ­a
- **TPV Real**: Ventas, facturaciÃ³n, cobros reales
- **Inventario Real**: Stock, proveedores, costes reales
- **HospederÃ­a Real**: Reservas, check-in/out, huÃ©spedes reales
- **Dashboard Administrativo**: KPIs econÃ³micos reales
- **Sistema de Roles**: Admin/Manager/Employee con permisos reales

### âš¡ **EstÃ¡ndares de ImplementaciÃ³n**:
- **Datos Reales**: Siempre conectar con base de datos real
- **MÃ©tricas Productivas**: KPIs Ãºtiles para gestiÃ³n empresarial
- **Interfaz Profesional**: DiseÃ±o listo para uso empresarial
- **Funcionalidad Completa**: No prototipos, funciones completas

## ï¿½ Nomenclatura Obligatoria
**Formato**: `[v{VERSION}]_TIPO_ÃREA_DESCRIPCIÃ“N_ESTADO.md`

## ğŸ“‚ Estructura de docs/
- `changelog/` - Cambios por versiÃ³n
- `development/` - Procesos tÃ©cnicos (completed/, planning/, fixes/, progress/)
- `analysis/` - AnÃ¡lisis e investigaciÃ³n  
- `archive/` - Documentos obsoletos

## âš ï¸ VALIDACIONES OBLIGATORIAS
1. âœ… Leer README antes de actuar - **SIN EXCEPCIONES**
2. âœ… Verificar nomenclatura con versionado - **OBLIGATORIO**
3. âœ… Confirmar ubicaciÃ³n correcta - **RIGUROSO**
4. âœ… No crear duplicados - **VERIFICACIÃ“N EXHAUSTIVA**
5. âœ… Documentar excepciones funcionales - **MANDATORIO**

## ğŸ”¥ TOLERANCIA CERO
- **NO** hay excepciones por conveniencia
- **NO** hay excepciones por desconocimiento  
- **NO** hay excepciones por falta de tiempo
- **SÃ** hay excepciones por riesgo funcional tÃ©cnico (documentadas)

**VersiÃ³n actual**: v0.0.12

Ver `.copilot-instructions.md` para instrucciones completas.

## âš–ï¸ EXCEPCIONES FUNCIONALES PERMITIDAS
**ÃšNICAMENTE** se permiten excepciones cuando el cumplimiento estricto compromete la funcionalidad:

#### ğŸ”¥ Criterios para Excepciones CrÃ­ticas:
1. **Imports y Referencias**: Mover/renombrar archivos romperÃ­a imports existentes
2. **Funcionalidad CrÃ­tica**: Aplicar polÃ­ticas detendrÃ­a el sistema productivo
3. **Dependencias TÃ©cnicas**: Restricciones de frameworks, librerÃ­as o herramientas
4. **Compatibilidad**: Cambios causarÃ­an incompatibilidades con cÃ³digo existente

#### ğŸ“‹ Protocolo de ExcepciÃ³n:
**Cuando sea ABSOLUTAMENTE necesario hacer una excepciÃ³n:**
1. âœ… **Documentar la razÃ³n tÃ©cnica especÃ­fica**
2. âœ… **Crear un plan de cumplimiento futuro**  
3. âœ… **Registrar la excepciÃ³n en el README correspondiente**
4. âœ… **AÃ±adir TODO comment en el cÃ³digo afectado**
5. âœ… **Programar refactorizaciÃ³n para cumplir polÃ­ticas**

## ğŸš« **PROHIBIDO EN HEFEST**
### âŒ **Datos y Funcionalidades NO Permitidas**:
- **Datos simulados o de ejemplo** en cualquier componente
- **MÃ©tricas ficticias** o hardcodeadas 
- **Funciones de demostraciÃ³n** sin conexiÃ³n real
- **Prototipos** que no sean funcionales completos
- **Comentarios TODO** sin fecha lÃ­mite especÃ­fica
- **Componentes mock** en cÃ³digo de producciÃ³n

### âŒ **Patrones de CÃ³digo Prohibidos**:
```python
# âŒ PROHIBIDO - Datos simulados
fake_data = {"ventas": 1000, "ocupacion": 85}

# âŒ PROHIBIDO - MÃ©tricas hardcodeadas  
def get_ocupacion():
    return "85%"  # Dato falso

# âŒ PROHIBIDO - Funciones de demostraciÃ³n
def demo_dashboard():
    pass

# âœ… CORRECTO - Datos reales
def get_ocupacion_real():
    return hospederia_service.get_ocupacion_actual()
```

### âŒ **DocumentaciÃ³n Prohibida**:
- Documentos sin versionado especÃ­fico
- README sin polÃ­ticas de modificaciÃ³n
- Ejemplos con datos ficticios
- Instrucciones obsoletas o inconsistentes

## ğŸ“‚ Estructura de DocumentaciÃ³n Obligatoria

### docs/ - Directorio Principal
```
docs/
â”œâ”€â”€ README.md                    # ğŸ¯ LEER PRIMERO - PolÃ­ticas generales
â”œâ”€â”€ changelog/                   # ğŸ“ Cambios por versiÃ³n
â”œâ”€â”€ development/                 # ğŸ”§ Procesos tÃ©cnicos y desarrollo
â”œâ”€â”€ analysis/                    # ğŸ” AnÃ¡lisis y investigaciÃ³n  
â””â”€â”€ archive/                     # ğŸ“¦ Documentos archivados
```

### src/ - CÃ³digo Fuente
```
src/
â”œâ”€â”€ README.md                    # ğŸ¯ LEER PRIMERO - Arquitectura del cÃ³digo
â”œâ”€â”€ services/                    # ğŸ› ï¸ Servicios de negocio
â”œâ”€â”€ ui/                          # ğŸ–¥ï¸ Interfaz de usuario
â”œâ”€â”€ utils/                       # ğŸ”§ Utilidades y helpers
â””â”€â”€ core/                        # âš¡ Funcionalidades centrales
```

## ğŸ“ PolÃ­ticas de Nomenclatura OBLIGATORIAS

### Formato Universal con Versionado
```
[v{VERSION}]_[TIPO]_[ÃREA]_[DESCRIPCIÃ“N]_[ESTADO].md
```

**Ejemplos Correctos**:
- `[v0.0.13]_MIGRACION_DATOS_REALES_COMPLETADA.md`
- `[v0.0.14]_FIX_INVENTARIO_SERVICE_DUPLICACIÃ“N.md`
- `[v0.0.14]_PLAN_REFACTORIZACION_UI_COMPONENTS.md`

### Tipos de Documento por Carpeta

#### docs/development/
- `[v{VERSION}]_IMPLEMENTACION_` - Procesos de implementaciÃ³n
- `[v{VERSION}]_PLAN_` - Documentos de planificaciÃ³n  
- `[v{VERSION}]_FIX_` - Correcciones especÃ­ficas
- `[v{VERSION}]_DEPURACION_` - Procesos de debug
- `[v{VERSION}]_PROGRESO_` - Seguimiento de progreso
- `[v{VERSION}]_ESTANDARIZACION_` - Procesos de estandarizaciÃ³n
- `[v{VERSION}]_LIMPIEZA_` - Procesos de limpieza

#### docs/analysis/
- `[v{VERSION}]_cleanup_analysis_` - AnÃ¡lisis de limpieza
- `[v{VERSION}]_performance_analysis_` - AnÃ¡lisis de rendimiento
- `[v{VERSION}]_code_review_` - Revisiones de cÃ³digo

#### docs/changelog/
- `vX.X.X.md` - Formato estÃ¡ndar de versiones

## ğŸ—‚ï¸ UbicaciÃ³n por Tipo de Documento

### âœ… docs/development/completed/
**Criterio**: Tareas, procesos o implementaciones **finalizadas exitosamente**
**Ejemplos**: 
- Implementaciones completadas
- Migraciones finalizadas  
- Estandarizaciones completadas
- Limpiezas finalizadas

### ğŸ“‹ docs/development/planning/
**Criterio**: Documentos de **planificaciÃ³n y estrategia**
**Ejemplos**:
- Planes de estandarizaciÃ³n
- Roadmaps tÃ©cnicos
- Estrategias de migraciÃ³n

### ğŸ”§ docs/development/fixes/
**Criterio**: **Correcciones especÃ­ficas** y hotfixes
**Ejemplos**:
- UnificaciÃ³n de servicios
- CorrecciÃ³n de duplicados
- Fixes de bugs especÃ­ficos

### ğŸ“Š docs/development/progress/
**Criterio**: **Seguimiento activo** de tareas en curso
**Ejemplos**:
- Estado de proyectos en progreso
- MÃ©tricas de avance
- Reportes de estado

### ğŸ” docs/analysis/
**Criterio**: **AnÃ¡lisis, investigaciÃ³n y estudios**
**Ejemplos**:
- Estado del sistema
- AnÃ¡lisis de rendimiento
- InvestigaciÃ³n tÃ©cnica

### ğŸ“¦ docs/archive/
**Criterio**: Documentos **obsoletos o archivados**
**Ejemplos**:
- DocumentaciÃ³n obsoleta
- Procesos deprecados
- Referencias histÃ³ricas

## âš ï¸ VALIDACIONES OBLIGATORIAS Y RIGUROSAS

### ğŸ”’ Antes de Crear un Archivo (CUMPLIMIENTO OBLIGATORIO):
1. âœ… **Leer README raÃ­z** del Ã¡rea (`docs/README.md`, `src/README.md`) - **SIN EXCEPCIONES**
2. âœ… **Leer README especÃ­fico** de la carpeta de destino - **SIN EXCEPCIONES**
3. âœ… **Verificar nomenclatura** sigue EXACTAMENTE el formato `[v{VERSION}]_TIPO_ÃREA_DESCRIPCIÃ“N_ESTADO.md`
4. âœ… **Confirmar ubicaciÃ³n** segÃºn criterios ESTRICTOS de cada carpeta
5. âœ… **Verificar que no existe** archivo similar que deberÃ­a actualizarse
6. âœ… **Validar que el tipo de contenido** corresponde al tipo de carpeta
7. âœ… **Confirmar versionado** estÃ¡ actualizado y es correcto

### ğŸ”„ Antes de Mover un Archivo (VALIDACIÃ“N EXHAUSTIVA):
1. âœ… **Leer polÃ­ticas** de la carpeta de origen y destino - **OBLIGATORIO**
2. âœ… **Verificar criterios** de ubicaciÃ³n en ambas carpetas
3. âœ… **Confirmar que cumple** con la nomenclatura de destino
4. âœ… **Verificar imports/referencias** - Â¿Se romperÃ¡ algo? âœ **EXCEPCIÃ“N FUNCIONAL**
5. âœ… **Actualizar TODAS las referencias** si es necesario
6. âœ… **Probar funcionalidad** despuÃ©s del movimiento
7. âœ… **Documentar el cambio** en changelog si es significativo

### ğŸ—ï¸ Antes de Modificar Estructura (ANÃLISIS COMPLETO):
1. âœ… **Consultar README** de nivel superior - **MANDATORIO**
2. âœ… **Verificar impacto** en otros archivos y referencias
3. âœ… **Analizar dependencias** tÃ©cnicas y funcionales
4. âœ… **Seguir convenciones** establecidas RIGUROSAMENTE
5. âœ… **Actualizar documentaciÃ³n** afectada INMEDIATAMENTE
6. âœ… **Verificar que no se rompe funcionalidad** existente
7. âœ… **Obtener aprobaciÃ³n** para cambios estructurales mayores

## ğŸ”„ Flujo de Trabajo Recomendado

### Para Nuevos Documentos:
```
1. Identificar tipo de documento
2. Leer README raÃ­z â†’ Leer README especÃ­fico  
3. Determinar ubicaciÃ³n segÃºn criterios
4. Aplicar nomenclatura con versionado
5. Crear archivo en ubicaciÃ³n correcta
6. Actualizar README si es necesario
```

### Para Modificaciones:
```
1. Leer polÃ­ticas de la carpeta actual
2. Verificar si la modificaciÃ³n afecta la ubicaciÃ³n
3. Si cambia la ubicaciÃ³n: seguir flujo de reubicaciÃ³n
4. Si permanece: aplicar cambios manteniendo coherencia
5. Actualizar documentaciÃ³n relacionada
```

## ğŸ“š Referencias RÃ¡pidas

### READMEs CrÃ­ticos a Consultar:
- `docs/README.md` - **PolÃ­ticas generales de documentaciÃ³n**
- `docs/development/README.md` - **Procesos tÃ©cnicos y desarrollo**
- `docs/analysis/README.md` - **AnÃ¡lisis e investigaciÃ³n**
- `src/README.md` - **Arquitectura y estructura del cÃ³digo**
- `src/services/README.md` - **Servicios de negocio**
- `src/ui/README.md` - **Componentes de interfaz**

### Versiones del Proyecto:
- **Actual**: v0.0.12 (usar para documentos nuevos)
- **Formato**: v{MAJOR}.{MINOR}.{PATCH}
- **UbicaciÃ³n**: Verificar en `package.json` o `src/__version__.py`

## âŒ ERRORES COMUNES A EVITAR

1. **No leer README** antes de crear archivos
2. **UbicaciÃ³n incorrecta** segÃºn tipo de documento  
3. **Nomenclatura inconsistente** sin versionado
4. **Crear archivos en raÃ­z** de docs/ cuando deberÃ­an ir en subcarpetas
5. **No verificar duplicados** o archivos similares existentes
6. **No actualizar documentaciÃ³n** relacionada tras cambios

## âœ… CHECKLIST DE VALIDACIÃ“N RIGUROSA HEFEST

**ANTES de cualquier acciÃ³n - TODOS los puntos son OBLIGATORIOS:**

### ğŸ“‹ **ValidaciÃ³n Documental**
- [ ] Â¿LeÃ­ COMPLETAMENTE el README raÃ­z del Ã¡rea?
- [ ] Â¿LeÃ­ COMPLETAMENTE el README especÃ­fico de la carpeta?
- [ ] Â¿El nombre sigue EXACTAMENTE el formato `[v{VERSION}]_TIPO_ÃREA_DESCRIPCIÃ“N_ESTADO.md`?
- [ ] Â¿La ubicaciÃ³n es CORRECTA segÃºn los criterios ESTRICTOS?
- [ ] Â¿VerifiquÃ© que NO EXISTE archivo similar?

### ğŸ¨ **ValidaciÃ³n de Funcionalidad Empresarial HEFEST**
- [ ] Â¿La funcionalidad usa DATOS REALES de hostelerÃ­a/hospederÃ­a?
- [ ] Â¿Se conecta con SERVICIOS REALES (no simulados)?
- [ ] Â¿Las mÃ©tricas son ÃšTILES para gestiÃ³n empresarial?
- [ ] Â¿La interfaz es PROFESIONAL para uso productivo?
- [ ] Â¿Los roles y permisos son EMPRESARIALES reales?

### ğŸ”§ **ValidaciÃ³n TÃ©cnica**
- [ ] Â¿El versionado estÃ¡ ACTUALIZADO (v0.0.12)?
- [ ] Â¿ActualicÃ© documentaciÃ³n relacionada INMEDIATAMENTE?
- [ ] Â¿VerifiquÃ© que NO SE ROMPE funcionalidad existente?
- [ ] Â¿DocumentÃ© cualquier excepciÃ³n funcional aplicada?
- [ ] Â¿El cÃ³digo sigue patrones empresariales HEFEST?

### ğŸ’¼ **ValidaciÃ³n de Calidad Empresarial**
- [ ] Â¿La funcionalidad es Ãºtil para un negocio REAL?
- [ ] Â¿Aporta valor econÃ³mico/operativo medible?
- [ ] Â¿Se integra correctamente con flujos de trabajo existentes?
- [ ] Â¿Mantiene la coherencia con el sistema de roles?
- [ ] Â¿Es escalable para uso empresarial?

## ğŸ”¥ POLÃTICA DE CUMPLIMIENTO ESTRICTO HEFEST

### ğŸ’ª RIGOR MÃXIMO - TOLERANCIA CERO
- **TODAS las polÃ­ticas son OBLIGATORIAS** 
- **DATOS REALES siempre** - sin excepciÃ³n
- **Funcionalidad empresarial completa** - no prototipos
- **Cumplimiento inmediato y completo**
- **VerificaciÃ³n antes de cualquier acciÃ³n**

### âš¡ EXCEPCIONES FUNCIONALES - PROTOCOLO ESTRICTO
**SOLO cuando la funcionalidad estÃ© EN RIESGO:**
```
1. STOP - Identificar riesgo funcional especÃ­fico
2. DOCUMENT - Registrar la razÃ³n tÃ©cnica completa
3. PLAN - Crear estrategia de cumplimiento futuro
4. EXECUTE - Implementar soluciÃ³n temporal documentada
5. SCHEDULE - Programar refactorizaciÃ³n correctiva
```

### ğŸ¨ ESTÃNDARES EMPRESARIALES HEFEST - NO NEGOCIABLES
- **âŒ PROHIBIDO**: Datos de ejemplo, simulados o de demostraciÃ³n
- **âœ… OBLIGATORIO**: ConexiÃ³n con base de datos real de hostelerÃ­a
- **âœ… OBLIGATORIO**: MÃ©tricas Ãºtiles para toma de decisiones empresariales
- **âœ… OBLIGATORIO**: Interfaces profesionales listas para producciÃ³n
- **âœ… OBLIGATORIO**: Sistema de roles empresarial (Admin/Manager/Employee)

### ğŸš¨ CONSECUENCIAS DEL INCUMPLIMIENTO
- **Datos simulados** âœ Reemplazo inmediato por datos reales
- **Funciones de demostraciÃ³n** âœ ImplementaciÃ³n funcional completa
- **MÃ©tricas hardcodeadas** âœ ConexiÃ³n con servicios reales
- **Archivos mal ubicados** âœ ReubicaciÃ³n inmediata obligatoria
- **Nomenclatura incorrecta** âœ Renombrado inmediato obligatorio
- **Falta de documentaciÃ³n** âœ DocumentaciÃ³n completa obligatoria

## ğŸ“‹ EJEMPLOS DE EXCEPCIONES VÃLIDAS

### âœ… ExcepciÃ³n Funcional VÃ¡lida:
```
SITUACIÃ“N: Mover archivo romperÃ­a 15 imports en producciÃ³n
ACCIÃ“N: Mantener ubicaciÃ³n actual + TODO para refactorizaciÃ³n
DOCUMENTACIÃ“N: 
- RazÃ³n: Evitar ruptura de imports crÃ­ticos
- Plan: Refactorizar imports en v0.0.14
- Fecha lÃ­mite: PrÃ³xima release
```

### âŒ ExcepciÃ³n NO VÃ¡lida - Datos Simulados:
```
SITUACIÃ“N: "Es mÃ¡s fÃ¡cil usar datos de ejemplo por ahora"
ACCIÃ“N: Implementar conexiÃ³n con datos reales inmediatamente
RAZÃ“N: Hefest es sistema empresarial real, no admite datos simulados
```

### âŒ ExcepciÃ³n NO VÃ¡lida - Funcionalidad Incompleta:
```
SITUACIÃ“N: "Dejemos la funciÃ³n como prototipo"
ACCIÃ“N: Implementar funcionalidad completa o eliminar
RAZÃ“N: Hefest solo admite funciones empresariales completas
```

---

## ğŸ¯ RECORDATORIO FINAL - CUMPLIMIENTO OBLIGATORIO HEFEST

**ğŸ¨ HEFEST ES UN SISTEMA EMPRESARIAL REAL**: Cada lÃ­nea de cÃ³digo debe ser Ãºtil para un negocio real de hostelerÃ­a.

**âš¡ POLÃTICA RÃGIDA**: La coherencia, organizaciÃ³n y funcionalidad empresarial dependen del cumplimiento ESTRICTO de estas polÃ­ticas.

**ğŸ”’ TOLERANCIA CERO**: No hay excepciones por conveniencia, desconocimiento o falta de tiempo.

**ğŸ’¼ ESTÃNDAR EMPRESARIAL**: Solo datos reales, funcionalidades completas, interfaces profesionales.

**âš–ï¸ EXCEPCIONES FUNCIONALES**: Solo cuando la funcionalidad estÃ© tÃ©cnicamente comprometida, siguiendo el protocolo establecido.

**ğŸ“‹ SIEMPRE**: Consultar README antes de actuar, verificar que usa datos reales, confirmar utilidad empresarial.

**ğŸš€ OBJETIVO**: Mantener un sistema de hostelerÃ­a profesional, funcional y listo para producciÃ³n empresarial.

---

**VERSIÃ“N DE POLÃTICAS**: v0.0.12 - Sistema Empresarial Real
**ÃšLTIMA ACTUALIZACIÃ“N**: Junio 2025
**ESTADO**: âœ… ACTIVAS Y OBLIGATORIAS PARA HEFEST

## âœ… **PATRONES OBLIGATORIOS EN HEFEST**

### ğŸ¨ **ImplementaciÃ³n de Funcionalidades Reales**
```python
# âœ… CORRECTO - ConexiÃ³n con servicios reales
class HospitalityMetricCard(UltraModernMetricCard):
    def __init__(self):
        super().__init__()
        self.hospederia_service = HospederiaService()
        
    def get_ocupacion_actual(self):
        """Obtiene ocupaciÃ³n real de la base de datos"""
        return self.hospederia_service.get_ocupacion_actual()
        
    def get_ingresos_diarios(self):
        """Obtiene ingresos reales del TPV"""
        return self.tpv_service.get_ingresos_hoy()
```

### ğŸ“Š **Dashboard con Datos Productivos**
```python
# âœ… CORRECTO - Dashboard con mÃ©tricas empresariales reales
def setup_dashboard_metrics(self):
    """Configura mÃ©tricas reales para gestiÃ³n empresarial"""
    self.kpis = {
        'ocupacion': self.get_ocupacion_real(),
        'ingresos_diarios': self.get_ingresos_reales(),
        'stock_critico': self.get_alertas_stock(),
        'satisfaccion_clientes': self.get_rating_promedio()
    }
```

### ğŸ” **Sistema de Roles Empresarial**
```python
# âœ… CORRECTO - Roles con permisos empresariales reales
class UserRole:
    ADMIN = "admin"      # Acceso total, reportes financieros
    MANAGER = "manager"  # GestiÃ³n operativa, inventario
    EMPLOYEE = "employee" # Operaciones diarias, TPV
```

### ğŸ“ˆ **MÃ©tricas EconÃ³micas Reales**
```python
# âœ… CORRECTO - KPIs empresariales Ãºtiles
def get_kpis_economicos(self):
    return {
        'revenue_mensual': self.get_revenue_actual(),
        'margen_beneficio': self.calculate_profit_margin(),
        'costo_por_huesped': self.get_cost_per_guest(),
        'ocupacion_promedio': self.get_average_occupancy(),
        'ticket_promedio_tpv': self.get_average_ticket()
    }
```

## ğŸ—ï¸ **ARQUITECTURA EMPRESARIAL HEFEST**

### ğŸ“Š **Capas del Sistema**
1. **Capa de Datos**: ConexiÃ³n real con BD empresarial
2. **Capa de Servicios**: LÃ³gica de negocio hostelera
3. **Capa de UI**: Interfaz profesional para usuarios reales
4. **Capa de Reportes**: MÃ©tricas para toma de decisiones

### ğŸ”„ **Flujos de Trabajo Reales**
- **Check-in/Check-out**: GestiÃ³n real de huÃ©spedes
- **FacturaciÃ³n**: GeneraciÃ³n de facturas reales
- **Inventario**: Control de stock real
- **Reportes**: AnÃ¡lisis financiero real

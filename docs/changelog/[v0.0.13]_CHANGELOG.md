---


### Centralizaci√≥n y migraci√≥n de estilos visuales a ModernStyles (07/07/2025)

- **Centralizaci√≥n de estilos QSS y helpers visuales:**
  - Migraci√≥n de todos los estilos QSS/inline de los siguientes componentes a helpers centralizados en `src/utils/modern_styles.py`:
    - `mesas_area_grid.py`
    - `mesa_widget_simple.py`
    - `kpi_widget.py`
    - `mesas_area_stats.py`
    - `reserva_list_item_widget.py`
  - Eliminaci√≥n de duplicidad de estilos y cumplimiento estricto de la pol√≠tica de centralizaci√≥n visual.
  - Todos los widgets relevantes ahora usan m√©todos de estilo centralizados, facilitando el mantenimiento y la coherencia visual.
  - Validado: sin errores de tipado ni sintaxis tras la migraci√≥n.
  - Autor: GitHub Copilot
  - Fecha: 2025-07-07

- **TPV - Widget MesaWidget Simple:**
  - El alias/nombre de la mesa en estado **reservada** ahora se centra perfectamente tanto vertical como horizontalmente, eliminando cualquier padding o margen superior/inferior extra.
  - Se fuerza el alignment y layout para m√°xima visibilidad, cumpliendo la pol√≠tica de UI/UX y estandarizaci√≥n visual.
  - Se prob√≥ forzar un tama√±o de fuente mayor, pero se prioriz√≥ el centrado y la responsividad para evitar cortes.
  - Validado visualmente en entorno real.
  - Autor: GitHub Copilot
  - Fecha: 2025-07-07
# [v0.0.13]_CHANGELOG.md

## Versi√≥n v0.0.13 ‚Äì [Fecha de publicaci√≥n]

### Resumen de cambios principales

- **Limpieza y organizaci√≥n de la ra√≠z del proyecto:**
  - Archivos sueltos y experimentales movidos a carpetas especializadas (`docs/logs/`, `scripts/analysis/`, `scripts/testing/`).
  - Eliminaci√≥n de archivos temporales y de resumen fuera de las carpetas permitidas.
- **Adaptaci√≥n de documentaci√≥n:**
  - Todos los README de carpetas y subcarpetas adaptados a la plantilla visual y profesional centralizada.
  - Eliminaci√≥n de detalles de progreso, m√©tricas y descripciones t√©cnicas de los README, centralizando la documentaci√≥n en `docs/`.
- **Reorganizaci√≥n de scripts y logs:**
  - Scripts experimentales y logs movidos a sus carpetas correspondientes.
- **Cumplimiento de pol√≠ticas de nomenclatura y estructura:**
  - Renombrado de changelogs para cumplir la pol√≠tica `[v{VERSION}]_CHANGELOG.md`.
  - Actualizaci√≥n del README de `changelog/` para reflejar la estructura y archivos actuales.
  - Eliminaci√≥n de archivos no permitidos en la carpeta `changelog/`.
- **TPV - Widget MesaWidget Simple:**
  - Responsividad y ajuste visual perfeccionados para el alias/nombre de mesa:
    - Siempre en una sola l√≠nea, con elipsis si no cabe.
    - Margen de seguridad ajustado para evitar cortes visuales.
    - Tooltip autom√°tico si hay elipsis.
    - El c√°lculo se realiza sobre el espacio reducido real tras la aparici√≥n de los botones.
  - Cumple est√°ndar visual, UX y pol√≠ticas de nomenclatura y organizaci√≥n.

---

### Detalles

#### Documentaci√≥n
- Plantilla visual y profesional aplicada a todos los README.
- Centralizaci√≥n de la documentaci√≥n t√©cnica en `docs/`.

#### Organizaci√≥n de archivos
- Limpieza de ra√≠z y reubicaci√≥n de archivos experimentales.
- Eliminaci√≥n de duplicados y temporales.

#### Changelogs
- Renombrado de archivos antiguos para cumplir la nomenclatura est√°ndar.
- Actualizaci√≥n de referencias en README de `changelog/`.

#### TPV - Widget MesaWidget Simple
- Responsividad y ajuste visual perfeccionados para el alias/nombre de mesa (1 l√≠nea, elipsis, margen seguro, tooltip, c√°lculo sobre espacio reducido tras botones).
- Commit: fix: responsividad y ajuste visual perfecto del alias/nombre de mesa en widget simple TPV (1 l√≠nea, elipsis, margen seguro, tooltip). Cumple est√°ndar visual y UX
- Autor: GitHub Copilot
- Fecha: 2025-06-28

---

### Novedades recientes (post 2025-06-28)

- **TPV - Grid de Mesas:**
  - Implementaci√≥n de **lazy loading**: los widgets de mesa solo se crean/renderizan cuando est√°n en el √°rea visible del scroll, mejorando el rendimiento con muchas mesas.
  - Infraestructura para **sincronizaci√≥n de scroll** entre √°reas: permite que dos grids de mesas se desplacen sincronizadamente (√∫til para vistas avanzadas o comparativas).
  - Refactor y robustez en clipping visual y scroll en la ventana principal.
  - Cumplimiento estricto de pol√≠ticas de organizaci√≥n y nomenclatura.

#### Commits relevantes:
- `feat(tpv): lazy loading y sincronizaci√≥n de scroll en grid de mesas (UX)` (2025-07-01)
- `ad07d99 [v0.0.12] UX: Ventana principal maximizada, clipping con scroll y mejoras de robustez visual`

- **TPV - Reactividad agenda y grid de mesas:**
  - Ahora, al cancelar una reserva desde la agenda, la mesa correspondiente se libera autom√°ticamente en el grid de mesas.
  - Sincronizaci√≥n total entre reservas y estado visual de las mesas.
  - Ajuste en `refresh_mesas` para actualizar el estado a 'libre' si la mesa ya no tiene reservas activas.
  - Fix: a√±adido `# type: ignore[reportAttributeAccessIssue]` para evitar falso positivo de Pylance sobre `sync_reservas`.
  - Cumplimiento estricto de pol√≠ticas de nomenclatura, modularidad y documentaci√≥n.
  - Autor: GitHub Copilot
  - Fecha: 2025-07-01

- **TPV - L√≥gica de transici√≥n autom√°tica de estado de mesas:**
  - Ahora las mesas cambian autom√°ticamente de 'reservada' a 'ocupada' en el momento exacto en que la reserva entra en curso, sin necesidad de refresco manual.
  - Cuando se elimina la reserva activa, la mesa vuelve autom√°ticamente a 'libre'.
  - El widget MesaWidget Simple actualiza en tiempo real el estado visual y oculta el contador al iniciar la reserva.
  - Limpieza completa de prints y elementos de debug en todos los m√≥dulos del TPV.
  - Cumple con la pol√≠tica de sincronizaci√≥n visual y l√≥gica, y con la estandarizaci√≥n de c√≥digo y documentaci√≥n.
  - Autor: GitHub Copilot
  - Fecha: 2025-07-01

- **TPV - EventBus global de mesas:**
  - Migraci√≥n completa de todas las se√±ales y flujos de actualizaci√≥n de mesas a un EventBus centralizado (`mesa_event_bus`).
  - Eliminaci√≥n de se√±ales locales y conexiones directas entre widgets, grids, dialogs, main y controladores.
  - Reactividad global y desacoplada: cualquier cambio en una mesa se refleja autom√°ticamente en todos los componentes relevantes.
  - Limpieza de todos los prints y mensajes de debug relacionados con mesas y grid.
  - Refactor y robustez en la suscripci√≥n y emisi√≥n de eventos para evitar inconsistencias visuales o de estado.
  - Cumplimiento estricto de pol√≠ticas de modularidad, nomenclatura y documentaci√≥n.
  - Autor: GitHub Copilot
  - Fecha: 2025-07-02

---


---

### Cambios adicionales y fixes cr√≠ticos (02/07/2025)

- **MesaDialog y reservas:**
  - Se corrigi√≥ el m√©todo `procesar_reserva` para garantizar la persistencia de reservas en base de datos y la emisi√≥n correcta de eventos globales.
  - Ahora, al crear o cancelar una reserva desde MesaDialog, la agenda y el grid de mesas se sincronizan autom√°ticamente mediante el event bus global.
  - Se refuerza la recarga visual y de datos tras edici√≥n/cancelaci√≥n de reservas.
  - Se fuerza el estado 'activa' en la reserva emitida para m√°xima compatibilidad.
  - Validado que la agenda escucha correctamente el event bus y recarga reservas.

- **Grid de mesas:**
  - Se revis√≥ el flujo de se√±ales y refresco de componentes en TPVModule y MesasArea para evitar que el grid desaparezca o se corrompa tras guardar formularios o editar mesas.
  - Se mantiene la consistencia global usando los event bus de mesas y reservas.

- **Cumplimiento de pol√≠ticas:**
  - Todos los cambios alineados con la versi√≥n v0.0.13 y las pol√≠ticas de estandarizaci√≥n del proyecto.
  - Fixes documentados en `docs/development/fixes/` y validados en entorno real.

---

### UI/UX y Visual - Refactorizaci√≥n Header TPV (05/07/2025)

- **Eliminaci√≥n de m√©tricas duplicadas:**
  - Se eliminaron las tarjetas de m√©tricas de la parte superior del m√≥dulo TPV para evitar redundancia visual y funcional.
  - Ahora solo se muestran las m√©tricas en la secci√≥n de estad√≠sticas en tiempo real (contenedor rosa), unificando la experiencia y evitando confusi√≥n.
- **Nuevo header/t√≠tulo profesional:**
  - El t√≠tulo "GESTI√ìN DE MESAS - TPV" ahora ocupa todo el ancho y est√° perfectamente alineado y pegado al borde superior, igualando la altura y el ancho del header gris de HEFEST.
  - Se elimin√≥ cualquier margen, padding o borde innecesario para lograr cohesi√≥n visual total.
  - Se mejor√≥ la altura del t√≠tulo para igualar visualmente el header gris (120px).
  - Se a√±adi√≥ fondo degradado sutil y sombra inferior para dar profundidad y aspecto moderno, manteniendo la coherencia con el header gris.
  - Se a√±adi√≥ un borde inferior sutil para separar visualmente el t√≠tulo del resto del contenido.
- **Refactor de layouts y m√°rgenes:**
  - Se eliminaron los m√°rgenes y paddings heredados del layout base para que el t√≠tulo y el contenido se peguen perfectamente arriba y a los lados.
  - Se ajust√≥ la estructura de layouts para evitar headers base innecesarios y garantizar la m√°xima cohesi√≥n visual.
- **Correcci√≥n de errores:**
  - Se corrigi√≥ el error `'MesasArea' object has no attribute 'mesas_layout'` inicializando correctamente el atributo y a√±adiendo comprobaciones de seguridad.

**Autor:** GitHub Copilot
**Fecha:** 2025-07-05

---

### Refactor y unificaci√≥n total de widgets KPI de estad√≠sticas en tiempo real (05/07/2025)

- **Unificaci√≥n y refactor de widgets KPI en TPV y dashboard:**
  - Eliminada toda duplicidad de widgets y l√≥gica visual para tarjetas de m√©tricas en tiempo real.
  - Ahora tanto TPV como dashboard usan la versi√≥n avanzada y centralizada `KPIWidget` y los componentes reutilizables definidos en `kpi_components.py`.
  - Todo el c√≥digo antiguo de configuraci√≥n visual/manual de tarjetas KPI en `mesas_area_header.py` ha sido sustituido por la integraci√≥n con `create_subcontenedor_metric_cards`.
  - Validaci√≥n visual y funcional completa en ambos contextos.
  - Documentaci√≥n exhaustiva del proceso, API y arquitectura en el fix correspondiente (ver: `docs/development/completed/FIX_UNIFICACION_WIDGETS_KPI_ESTADISTICAS_TIEMPO_REAL_v0.0.13_COMPLETADO.md`).
  - Se movi√≥ el fix a la carpeta de completados y se actualiz√≥ el plan de mejoras.
  - Cumplimiento estricto de pol√≠ticas de estandarizaci√≥n, nomenclatura y registro de excepciones funcionales temporales.

- **Impacto:**
  - Experiencia de usuario unificada y moderna en todas las m√©tricas en tiempo real.
  - Base s√≥lida para futuras mejoras visuales, de accesibilidad y microinteracciones.
  - Eliminaci√≥n de deuda t√©cnica y duplicidad en la arquitectura de m√©tricas.

- **Autor:** GitHub Copilot
- **Fecha:** 2025-07-05

---

## üö© Cierre de versi√≥n v0.0.13 (07/07/2025)

- Todos los cambios, fixes y mejoras de la versi√≥n 0.0.13 han sido completados y validados.
- Esta versi√≥n se marca como FINALIZADA y lista para merge en rama main.
- No se a√±adir√°n m√°s cambios a este changelog.
- Pr√≥ximos desarrollos y fixes se documentar√°n en la versi√≥n 0.0.14.

**Estado:** FINALIZADA
**Fecha de cierre:** 2025-07-07
**Preparado para release y merge a main.**
